<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stephen Pearce">
<meta name="author" content="Adam D McKinnon">
<meta name="dcterms.date" content="2023-09-10">
<meta name="description" content="Simple methods for creating people analytics data that you can reuse in your context.">

<title>Adam D McKinnon - Creating Synthetic People Analytics Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      color: white;
    }
    </style>


</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Adam D McKinnon</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/adamdmckinnon/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/adam-d-mckinnon"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Creating Synthetic People Analytics Data</h1>
                  <div>
        <div class="description">
          Simple methods for creating people analytics data that you can reuse in your context.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Synthetic Data</div>
                <div class="quarto-category">People Analytics</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p>Stephen Pearce </p>
               <p>Adam D McKinnon </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 10, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#a-basic-random-dataset" id="toc-a-basic-random-dataset" class="nav-link active" data-scroll-target="#a-basic-random-dataset">1. A basic random dataset</a>
  <ul class="collapse">
  <li><a href="#explanation" id="toc-explanation" class="nav-link" data-scroll-target="#explanation">Explanation</a>
  <ul class="collapse">
  <li><a href="#a.-function-definition" id="toc-a.-function-definition" class="nav-link" data-scroll-target="#a.-function-definition">a. Function Definition</a></li>
  <li><a href="#b.-custom-sample-function" id="toc-b.-custom-sample-function" class="nav-link" data-scroll-target="#b.-custom-sample-function">b. Custom Sample Function</a></li>
  <li><a href="#c.-creating-the-dataset" id="toc-c.-creating-the-dataset" class="nav-link" data-scroll-target="#c.-creating-the-dataset">c.&nbsp;Creating the Dataset</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#creating-relationships-between-variables" id="toc-creating-relationships-between-variables" class="nav-link" data-scroll-target="#creating-relationships-between-variables">2. Creating relationships between variables</a>
  <ul class="collapse">
  <li><a href="#simple-two-variable-relationship" id="toc-simple-two-variable-relationship" class="nav-link" data-scroll-target="#simple-two-variable-relationship">1. Simple two variable relationship</a></li>
  <li><a href="#complex-multi-variable-relationships" id="toc-complex-multi-variable-relationships" class="nav-link" data-scroll-target="#complex-multi-variable-relationships">2. Complex multi-variable relationships</a></li>
  <li><a href="#a.-setting-up-probabilities" id="toc-a.-setting-up-probabilities" class="nav-link" data-scroll-target="#a.-setting-up-probabilities">a. Setting up probabilities</a></li>
  <li><a href="#b.-determining-hire-status" id="toc-b.-determining-hire-status" class="nav-link" data-scroll-target="#b.-determining-hire-status">b. Determining Hire Status</a></li>
  <li><a href="#c.-assigning-employment-type" id="toc-c.-assigning-employment-type" class="nav-link" data-scroll-target="#c.-assigning-employment-type">c.&nbsp;Assigning Employment Type</a></li>
  </ul></li>
  <li><a href="#pulling-it-all-together" id="toc-pulling-it-all-together" class="nav-link" data-scroll-target="#pulling-it-all-together">3. Pulling it all together</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell" data-code_folding="false">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="maxim-berg-Ac02zYZs22Y-unsplash.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption"><a href="https://unsplash.com/@maxberg">Photo by Maxim Berg on Unsplash</a>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>Practising people analytics methods can be difficult in the absence of data. Unfortunately, privacy concerns associated with employee data can make accessing datasets difficult. As a consequence, it can be useful for analysts, both novice and seasoned, to be able to generate synthetic datatsets for testing and explaining analytical methods.</p>
<p>The current article focuses on the generation of synthetic data using R. We will examine the generation of the following two datasets:</p>
<ol type="1">
<li><strong>A basic random dataset; and</strong></li>
<li><strong>Creating multiple relationships between variables.</strong></li>
</ol>
<p>We have approached the above steps in a “recursive” fashion. By this we mean that we have developed functions that you can use “as-is”, or modify, to create synthetic datasets in your own context.</p>
<p><br></p>
<section id="a-basic-random-dataset" class="level1">
<h1>1. A basic random dataset</h1>
<p>When the dataset requirements are simple we can use R’s inbuilt random generators. This can be done in one of two ways:</p>
<ol type="1">
<li><p>sampling from a statistical distribution using the <code>rnorm</code> function (e.g., for a random value from a Normal distribution). This may be appropriate when creating a continuous variable such as age, tenure, or wage.</p></li>
<li><p>sampling from a defined list of options and probabilities with <code>sample</code>. This is more appropriate when creating nominal variables in the dataset such as gender, job family, or location.</p></li>
</ol>
<p>Using a combination of these functions, the following code can be used to generate synthetic data that approximates real world data.</p>
<p><br></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># create a function that will generate 7 variables with fixed responses</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>generate_basic_data <span class="ot">&lt;-</span> <span class="cf">function</span>(num_rows){</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  sample_replace <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">prob =</span> <span class="cn">NULL</span>) {</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    base<span class="sc">::</span><span class="fu">sample</span>(<span class="at">x =</span> x, <span class="at">prob =</span> prob, <span class="at">size =</span> num_rows, <span class="at">replace =</span> T)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">id              =</span> <span class="dv">1</span><span class="sc">:</span>num_rows,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">age             =</span> <span class="fu">rnorm</span>(num_rows, <span class="at">mean =</span> <span class="dv">40</span>, <span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hire_date       =</span> <span class="fu">sample_replace</span>(<span class="fu">seq.Date</span>(<span class="at">from =</span> <span class="fu">dmy</span>(<span class="st">"01/01/1990"</span>), <span class="at">to =</span> <span class="fu">today</span>(), <span class="at">by =</span> <span class="st">"1 day"</span>)),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">job_family      =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"Engineering"</span>, <span class="st">"Sales"</span>, <span class="st">"Administration"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.6</span>,<span class="fl">0.25</span>, <span class="fl">0.15</span>)),</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_type   =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"Full Time"</span>, <span class="st">"Part Time"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.1</span>)),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">employment_type =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"Permanent"</span>, <span class="st">"Contract"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.7</span>,<span class="fl">0.3</span>)),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">state           =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"VIC"</span>,<span class="st">"NSW"</span>,<span class="st">"QLD"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>))</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># generate 10 rows of data</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_basic_data</span>(<span class="at">num_rows =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
      id   age hire_date  job_family     contract_type employment_type state
   &lt;int&gt; &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;           &lt;chr&gt;
 1     1  42.9 2000-01-09 Engineering    Full Time     Permanent       VIC  
 2     2  39.9 2003-11-20 Engineering    Part Time     Contract        NSW  
 3     3  39.1 1996-01-15 Sales          Full Time     Permanent       VIC  
 4     4  34.2 2008-07-13 Engineering    Full Time     Permanent       NSW  
 5     5  52.8 1998-05-23 Engineering    Full Time     Permanent       VIC  
 6     6  47.1 2008-01-05 Engineering    Part Time     Contract        QLD  
 7     7  40.3 2015-07-17 Sales          Full Time     Permanent       VIC  
 8     8  42.4 2013-07-15 Administration Full Time     Contract        VIC  
 9     9  41.2 1992-06-12 Engineering    Full Time     Permanent       VIC  
10    10  38.6 2000-08-23 Administration Full Time     Contract        QLD  </code></pre>
</div>
</div>
<p><br></p>
<section id="explanation" class="level2">
<h2 class="anchored" data-anchor-id="explanation">Explanation</h2>
<p>This R code above defines a function named <code>generate_basic_data</code> that creates a dataset with seven variables. You specify the number of rows you want in the dataset by passing a value to the <code>num_rows</code> parameter when you call the function.</p>
<p>Here’s a step-by-step explanation:</p>
<section id="a.-function-definition" class="level3">
<h3 class="anchored" data-anchor-id="a.-function-definition">a. Function Definition</h3>
<p>The line <code>generate_basic_data &lt;- function(num_rows){ … }</code> creates a function named <code>generate_basic_data</code>. When you want to use this function later (see the last line of code in the block), you’ll tell it how many rows you want by providing a number for <code>num_rows</code>.</p>
</section>
<section id="b.-custom-sample-function" class="level3">
<h3 class="anchored" data-anchor-id="b.-custom-sample-function">b. Custom Sample Function</h3>
<p>Inside the function, there’s a nested helper function named <code>sample_replace</code>. This helper function makes it easier to sample values repeatedly from a given list, with the possibility of repeating values.</p>
</section>
<section id="c.-creating-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="c.-creating-the-dataset">c.&nbsp;Creating the Dataset</h3>
<p>The <code>tibble</code> (i.e., Tidy terminology for a data frame) function creates a table of data (similar to an Excel sheet with rows and columns). Each line within this function is defining a column for our table:</p>
<ul>
<li><p><strong><code>id</code></strong>: Just a sequential number from 1 to the number of rows you’ve asked for. Think of this as a unique identifier for each row.</p></li>
<li><p><strong><code>age</code></strong>: Generates random ages that are normally distributed with an average age of 40 and a standard deviation of 5. This means most ages will be close to 40, but there will be some variation.</p></li>
<li><p><strong><code>hire_date</code></strong>: Randomly selects dates between January 1, 1990, and today. Since <code>sample_replace</code> is used, some dates might be repeated in different rows.</p></li>
<li><p><strong><code>job_family</code></strong>: Randomly selects a job family from the choices “Engineering”, “Sales”, and “Administration”. There’s a 60% chance of picking “Engineering”, 25% chance for “Sales”, and 15% for “Administration”.</p></li>
<li><p><strong><code>contract_type</code></strong>: Randomly selects contract type status. “Full Time” will be picked 90% of the time, while “Part Time” will be picked 10% of the time.</p></li>
<li><p><code>employment_type</code>: Randomly selects the employment type. “Permanent” jobs will appear 70% of the time, while “Contract” jobs will appear 30% of the time.</p></li>
<li><p><code>state</code>: Randomly selects a state from “VIC”, “NSW”, and “QLD” with respective probabilities of 50%, 30%, and 20%.</p></li>
</ul>
<p>Once you run the function, for example <code>generate_basic_data(100)</code>, it will generate a dataset with 100 rows, filled with the kinds of values described above. In essence, this function is useful for generating a synthetic dataset about employees, including information about their ages, hiring dates, job families, employment types, etc.</p>
<p><br></p>
<p><br></p>
</section>
</section>
</section>
<section id="creating-relationships-between-variables" class="level1">
<h1>2. Creating relationships between variables</h1>
<p>If you’re trying to create data that has similar properties to a real dataset, you may want to begin by performing an exploratory analysis to understand what relationships are present in the existing data and decide which are relevant for your synthetic data (i.e., those you want to replicate). The previous code can be updated to take these differences into account. A separate data generation function will need to be created for each variable relationship.</p>
<p><br></p>
<section id="simple-two-variable-relationship" class="level3">
<h3 class="anchored" data-anchor-id="simple-two-variable-relationship">1. Simple two variable relationship</h3>
<p>Say the main office for our example company was in the Australian state of Victoria. We would expect the administrative staff to be more likely to work there, as opposed to being randomly distributed across the Australian states. To make this work we will need to change how we randomly select a state to be dependent on the job family. The following code below brings this relationship to life.</p>
<p><br></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sample_state <span class="ot">&lt;-</span> <span class="cf">function</span>(job_family){</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Different State probabilities depending on job family</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    prob_for_family <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Engineering"</span>    <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Sales"</span>          <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Administration"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                            )</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Randomly select the state using the per-job probabilities</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map_chr</span>(job_family, <span class="sc">~</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"VIC"</span>,<span class="st">"NSW"</span>,<span class="st">"QLD"</span>), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> prob_for_family[[.]])</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
<p>This code defines a function named <code>sample_state</code> that randomly samples (selects) a state (“VIC”, “NSW”, or “QLD”) based on the given job family. Different job families have different probabilities of being associated with a particular state. The probabilities are provided in the same order as the states.</p>
<p>Let’s break down the function:</p>
<p><code>sample_state &lt;- function(job_family){ … }</code> defines a function that takes a single argument <code>job_family</code> (e.g., “Engineering”). Inside the function, a list named <code>prob_for_family</code> is created. This list provides the probabilities of each state being selected for each job family. Engineering and Sales both have the same probabilities, while Administration has a much higher probability of being in Victoria (“VIC”).</p>
<p>The <code>map_chr</code> function does all the work. Essentially, for each job_family provided it samples a state based on the respective probabilities provided in the prob_for_family list, and the state is generated.</p>
<p><br></p>
</section>
<section id="complex-multi-variable-relationships" class="level3">
<h3 class="anchored" data-anchor-id="complex-multi-variable-relationships">2. Complex multi-variable relationships</h3>
<p>The approach above can be extended as the interactions become more complex. For example, we could imagine a scenario in which employment type is dependent on both the hire date and the job family. More specifically, short-term contracts could be more likely to be attributable to the following two conditions:</p>
<ol type="1">
<li><p>Sales staff; or</p></li>
<li><p>Less tenured hires–those with less than 5 years tenure.</p></li>
</ol>
<p>The following code documents how these relationships are achieved when generating synthetic data.</p>
<p><br></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>sample_employment <span class="ot">&lt;-</span> <span class="cf">function</span>(hired, job) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Probability map of Permanent/Contract employment for combinations of </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># new/old hires and job family</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    prob_map <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">new_hire =</span> <span class="fu">list</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Engineering"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Sales"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.6</span>),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Administration"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">old_hire =</span> <span class="fu">list</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Engineering"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.1</span>),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Sales"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.3</span>),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Administration"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.1</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    hire_status <span class="ot">=</span> <span class="fu">ifelse</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>      lubridate<span class="sc">::</span><span class="fu">time_length</span>(hired <span class="sc">%--%</span> <span class="fu">today</span>(), <span class="st">"years"</span>) <span class="sc">&lt;</span> <span class="dv">5</span>, </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">"new_hire"</span>, </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">"old_hire"</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map2_chr</span>(</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>      hire_status, job, </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Permanent"</span>, <span class="st">"Contract"</span>), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> prob_map[[.x]][[.y]])</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
<p>Let’s explain this code in simple terms.</p>
</section>
<section id="a.-setting-up-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="a.-setting-up-probabilities">a. Setting up probabilities</h3>
<p>First, it creates a set of rules (the <code>prob_map</code> list). This set of rules gives different chances of having a “Permanent” or “Contract” job based on the job role and whether the person was newly hired (less than 5 years ago) or has been with the company longer.</p>
<p>For example, according to the rules:</p>
<ul>
<li><p>A new engineer has a 70% chance of being permanent and 30% chance of being on contract.</p></li>
<li><p>An engineer who’s been hired for over 5 years has a 90% chance of being permanent.</p></li>
</ul>
</section>
<section id="b.-determining-hire-status" class="level3">
<h3 class="anchored" data-anchor-id="b.-determining-hire-status">b. Determining Hire Status</h3>
<p>For each person, the code checks how long ago they were hired using the <code>lubridate::time_length</code> function. If it’s less than 5 years, they are labeled as “new_hire”. Otherwise, they’re an “old_hire”.</p>
</section>
<section id="c.-assigning-employment-type" class="level3">
<h3 class="anchored" data-anchor-id="c.-assigning-employment-type">c.&nbsp;Assigning Employment Type</h3>
<p>Based on the hire status and job role of each person, the code uses the rules set up in the first step to take a guess at whether they have a “Permanent” or “Contract” job. This is done using the <code>purrr::map2_chr</code> function, which applies the <code>sample</code> function to assign an employment type based on the given probabilities for each combination of hire status and job role.</p>
<p>So, by using this <code>sample_employment</code> function and providing a list of hiring dates and job roles, you’d get a list of assignments of whether each person has a “Permanent” or “Contract” job based on their job role and how long they’ve been hired.</p>
<p><br></p>
<p><br></p>
</section>
</section>
<section id="pulling-it-all-together" class="level1">
<h1>3. Pulling it all together</h1>
<p>To bring it all together, we can now swap out how we randomly selected state and employment type in the first basic example with our two functions above that randomly generate data based on the relationship with other variables. These other variables are generated earlier (e.g.&nbsp;<code>hire_date</code> &amp; <code>job_family</code>), so that they can be used to inform the generation of <code>employment_type</code>.</p>
<p>The following code produces a randomised dataset with our desired relationships that can then be saved and used later for trialing and/or learning analytics methods.</p>
<p><br></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>generate_complex_data <span class="ot">&lt;-</span> <span class="cf">function</span>(num_rows){</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    sample_replace <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">prob =</span> <span class="cn">NULL</span>){</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sample</span>(<span class="at">x =</span> x, <span class="at">prob =</span> prob, <span class="at">size =</span> num_rows, <span class="at">replace =</span> T)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">id              =</span> <span class="dv">1</span><span class="sc">:</span>num_rows,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">age             =</span> <span class="fu">rnorm</span>(num_rows, <span class="at">mean =</span> <span class="dv">40</span>, <span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">hire_date       =</span> <span class="fu">sample_replace</span>(<span class="fu">seq.Date</span>(<span class="at">from =</span> <span class="fu">dmy</span>(<span class="st">"01/01/1990"</span>), <span class="at">to =</span> <span class="fu">today</span>(), <span class="at">by =</span> <span class="st">"1 day"</span>)),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">job_family      =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"Engineering"</span>, <span class="st">"Sales"</span>, <span class="st">"Administration"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.6</span>,<span class="fl">0.25</span>, <span class="fl">0.15</span>)),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">contract_type   =</span> <span class="fu">sample_replace</span>(<span class="fu">c</span>(<span class="st">"Full Time"</span>, <span class="st">"Part Time"</span>), <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.1</span>)),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">employment_type =</span> <span class="fu">sample_employment</span>(hire_date, job_family),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">state           =</span> <span class="fu">sample_state</span>(job_family) </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># call the generate_complex_data function to create a dataset of 10 rows</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_complex_data</span>(<span class="at">num_rows =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
      id   age hire_date  job_family  contract_type employment_type state
   &lt;int&gt; &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;           &lt;chr&gt;
 1     1  41.3 1999-04-20 Sales       Full Time     Contract        VIC  
 2     2  46.2 2001-03-17 Sales       Full Time     Permanent       NSW  
 3     3  36.3 1993-03-26 Engineering Full Time     Permanent       NSW  
 4     4  40.5 2021-03-12 Engineering Full Time     Permanent       VIC  
 5     5  46.1 2001-08-27 Sales       Full Time     Contract        VIC  
 6     6  38.2 1998-03-28 Sales       Full Time     Permanent       NSW  
 7     7  39.7 1990-12-14 Engineering Part Time     Permanent       VIC  
 8     8  35.0 2019-08-02 Engineering Full Time     Permanent       VIC  
 9     9  36.4 2012-07-09 Sales       Full Time     Permanent       VIC  
10    10  42.0 1993-09-17 Engineering Full Time     Permanent       NSW  </code></pre>
</div>
</div>
<p><br></p>
<p><br></p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The above approach works well when there are a smaller number of variables and relationships to account for. It is capable of creating synthetic datasets with a greater number of variables, howver, at the risk of greater complexity and difficulty to maintain.</p>
<p>Once your needs for synthetic data have outgrown the approach above, there are alternatives that may be worth exploring. The <a href="https://declaredesign.org/r/fabricatr/">fabricatr</a> package provides a method to generate synthetic datasets with quite sophisticated interactions between variables. Or if you have a specific real dataset whose characteristics you are looking to re-create, the <a href="https://www.synthpop.org.uk">synthpop</a> package may be appropriate.</p>
<p>Irrespective, we hope the example above is useful in helping you develop realistic synthetic data that facilitates greater learning and experimentation in the field of People Analytics.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{pearce2023,
  author = {Stephen Pearce and Adam D McKinnon},
  title = {Creating {Synthetic} {People} {Analytics} {Data}},
  date = {2023-09-10},
  url = {https://www.adam-d-mckinnon.com//posts/2023-08-10-synthetic_data},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-pearce2023" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Stephen Pearce, and Adam D McKinnon. 2023. <span>“Creating Synthetic
People Analytics Data.”</span> September 10, 2023. <a href="https://www.adam-d-mckinnon.com//posts/2023-08-10-synthetic_data">https://www.adam-d-mckinnon.com//posts/2023-08-10-synthetic_data</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>