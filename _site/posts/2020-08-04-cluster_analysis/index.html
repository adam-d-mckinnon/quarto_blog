<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adam D McKinnon">
<meta name="author" content="Monica Ashton">
<meta name="dcterms.date" content="2020-08-04">
<meta name="description" content="A “How To” article on the use of Cluster Analysis to understand phenomenon within Organisations.">

<title>Adam D McKinnon - A People Analytics Tutorial on Unsupervised Machine Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.25/datatables.js"></script>
<link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>


<link rel="stylesheet" href="../../custom.scss">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Adam D McKinnon</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/adamdmckinnon/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/adam-d-mckinnon"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">A People Analytics Tutorial on Unsupervised Machine Learning</h1>
                  <div>
        <div class="description">
          A “How To” article on the use of Cluster Analysis to understand phenomenon within Organisations.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Cluster Analysis</div>
                <div class="quarto-category">Gowers Distance</div>
                <div class="quarto-category">TSNE</div>
                <div class="quarto-category">Plotly</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p>Adam D McKinnon </p>
               <p>Monica Ashton </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 4, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#cluster-analysis-in-hr" id="toc-cluster-analysis-in-hr" class="nav-link active" data-scroll-target="#cluster-analysis-in-hr">Cluster Analysis in HR</a></li>
  <li><a href="#importing-the-data" id="toc-importing-the-data" class="nav-link" data-scroll-target="#importing-the-data">1. Importing the Data</a></li>
  <li><a href="#selecting-variables-for-clustering" id="toc-selecting-variables-for-clustering" class="nav-link" data-scroll-target="#selecting-variables-for-clustering">2. Selecting Variables for Clustering</a></li>
  <li><a href="#analysis-gower-distance" id="toc-analysis-gower-distance" class="nav-link" data-scroll-target="#analysis-gower-distance">3. Analysis: Gower Distance</a></li>
  <li><a href="#analysis-how-many-clusters" id="toc-analysis-how-many-clusters" class="nav-link" data-scroll-target="#analysis-how-many-clusters">4. Analysis: How many Clusters?</a></li>
  <li><a href="#analysis-interpreting-the-clusters" id="toc-analysis-interpreting-the-clusters" class="nav-link" data-scroll-target="#analysis-interpreting-the-clusters">5. Analysis: Interpreting the Clusters</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="sphx_glr_plot_cluster_comparison_0011.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Image source: Clustering: scikit-learn.org</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>We recently published an article titled <a href="https://www.adam-d-mckinnon.com/posts/welcome/"><strong>“A Beginner’s Guide to Machine Learning for HR Practitioners”</strong></a> where we touched on the three broad types of Machine Learning (ML); reinforcement, supervised, and unsupervised learning. In this follow-up article we will explore unsupervised ML in more depth. We will demonstrate how we use cluster analysis, a form of unsupervised ML, to identify similarities, patterns, and relationships in datasets intelligently (like humans – but faster or more accurately). We have included some practical code written in R. Let’s get started!</p>
<p><br></p>
<section id="cluster-analysis-in-hr" class="level2">
<h2 class="anchored" data-anchor-id="cluster-analysis-in-hr">Cluster Analysis in HR</h2>
<p>The objective we aim to achieve is an understanding of factors associated with employee turnover within our data. To do this, we form clusters based on a set of employee variables (i.e., Features) such as age, marital status, role level, and so on. The clusters help us better understand the many attributes that may be associated with turnover, and whether there are distinct clusters of employees that are more susceptible to turnover. This last insight can facilitate the personalising of the employee experience at scale by determining whether current HR policies are serving the employee clusters identified in the analysis, as opposed to using a one size fits all approach.</p>
</section>
<section id="importing-the-data" class="level1">
<h1>1. Importing the Data</h1>
<p>We begin by loading the R packages we will need for the analysis. The dataset we have used for our example is publicly available – it’s the IBM Attrition dataset. You can download it <a href="https://www.kaggle.com/pavansubhasht/ibm-hr-analytics-attrition-dataset/"><strong>here</strong></a> if you would like to follow along.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># data workhorse</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co"># importing xlsx files</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(correlationfunnel) <span class="co"># rapid exploratory data analysis</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster) <span class="co"># calculating gower distance and PAM</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rtsne) <span class="co"># dimensionality reduction and visualization</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly) <span class="co"># interactive graphing</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT) <span class="co"># interactive tables</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">175</span>) <span class="co"># reproducibility</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>hr_data_tbl <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(<span class="st">"datasets_1067_1925_WA_Fn-UseC_-HR-Employee-Attrition.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="selecting-variables-for-clustering" class="level1">
<h1>2. Selecting Variables for Clustering</h1>
<p>Under normal circumstances, we would spend time exploring the data – examining variables and their data types, visualising descriptive analyses (e.g., single variable and two variable analyses), understanding distributions, performing transformations if needed, and treating missing values and outliers.</p>
<p>However, for the sake of simplicity, we will skip this and instead just calculate the correlation between attrition and each variable in the dataset. Those variables with a correlation of greater than 0.1 will be included in the analysis. This is useful for several reasons, but most importantly to decide which variables to include for our cluster analysis.</p>
<p>Keep in mind that when it comes to clustering (or any other method), including more variables does not always mean a better outcome—simplicity should be the goal. Including more variables can complicate the interpretation of results and consequently make it difficult for the end-users to act upon results.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>hr_corr_tbl <span class="ot">&lt;-</span> hr_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove the Employee Number variable from the correlation analysis</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>EmployeeNumber) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># binarize cotinuous variables and one hot encode factors</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    correlationfunnel<span class="sc">::</span><span class="fu">binarize</span>(<span class="at">n_bins        =</span> <span class="dv">5</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">thresh_infreq =</span> <span class="fl">0.01</span>, </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">name_infreq   =</span> <span class="st">"OTHER"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                                <span class="at">one_hot       =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># correlate all variables with Attrition</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    correlationfunnel<span class="sc">::</span><span class="fu">correlate</span>(Attrition__Yes)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>hr_corr_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot the correlation</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    correlationfunnel<span class="sc">::</span><span class="fu">plot_correlation_funnel</span>(<span class="at">interactive =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-43318226aedc21a8593b" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-43318226aedc21a8593b">{"x":{"data":[{"x":[0,0],"y":[0.4,31.6],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-1,1,-0.246117994245804,0.246117994245804,0.212551096797114,0.206261967491481,0.2051670685142,0.195342355161261,0.181573471236258,0.180364429404994,0.17541855360922,0.171171876975466,0.162610954704957,0.157234270114793,-0.151048571597372,-0.131138275292419,0.122818651806023,0.117161039928458,0.115142765545051,-0.108122903184442,-0.103481737833152,0.0986887943026597,-0.098649567948639,0.0982904854596026,-0.097434760716718,-0.0943440389422919,-0.0909836512072824,0.0903288582110223,-0.0888698417497812,-0.0878299567498919,-0.0877163458893424,-0.0864610440446073,-0.0852929275767967,-0.0836007899569045,-0.0833163841644976,-0.0831777551898719,-0.082993924081346,0.0808552021360538,-0.080472149582789,-0.0786960496461546,-0.0783441875873579,-0.0758452077771366,-0.0744572992808522,0.0693545947648202,-0.0643011305604017,-0.0635774903465706,-0.0626369478467936,0.061894406973909,-0.060024751648164,0.0592223765690819,-0.0584763799533202,0.0570832087056188,-0.0562130512842715,0.0557806657217636,-0.0555380534550301,0.0536470485565395,0.0536466103789503,-0.0535658407499408,-0.0495378383669475,-0.0491678010313982,-0.0480969610294037,-0.0479087192018828,-0.0476379651833623,-0.0469987158780699,-0.0466072322109866,0.0447314705452419,-0.0442091673690162,-0.0435127935264003,0.0412161419443025,-0.0404384279136688,-0.0403092973241783,-0.0398543359853736,-0.0395298537691888,-0.0388475454468261,-0.0377643150135814,0.0375443985857368,0.0366045810269936,0.0364661968371013,0.0362150820698559,0.0353348808456097,-0.0351697315413425,-0.0342228376555373,0.0341433722163271,0.0339596077572285,-0.0327031477228971,0.0323037041693942,-0.0306301835838467,0.0305230714225062,0.0299161187041835,-0.0294532531751417,0.0294532531751417,0.0294303484836082,-0.0285067457541877,0.0280652856704796,-0.0260439246616237,0.0258983636312174,0.025723436587807,-0.0256756279940707,-0.0249734220729596,-0.0238618019046667,-0.0238453239468233,-0.0229398766875514,-0.0211128418677835,0.0207769633830653,0.0197743684592596,-0.01975071637301,0.0193949837648285,-0.017897516831939,-0.0176108655433134,0.0168320096044974,-0.0166236017683018,-0.0163802115322648,-0.015724006490382,-0.015724006490382,-0.0152674232371252,0.0141310089325874,-0.0135912641685966,0.0120242402573509,0.0120242402573509,-0.011983848101205,0.0110927061171171,-0.0106895392482966,0.0102708152947105,0.00739953246606211,-0.00704650026203013,0.00701451173601698,-0.00688425919277378,0.00403796302117428,0.0028887517110808,-0.0028887517110808,0.0028887517110808,0.0023246955959006,0.00161072398409206,-0.000833725574031576,-0.000359571340436571],"y":[31,31,30,30,29,28,27,26,25,24,23,22,21,20,26,29,19,18,17,21,25,16,24,20,27,28,23,15,20,15,23,29,14,22,20,22,20,14,26,20,13,28,17,12,16,18,21,11,24,10,24,13,18,12,9,9,8,29,17,27,28,19,22,12,7,18,19,25,11,27,11,11,27,8,21,11,7,12,20,9,11,8,21,6,12,7,6,5,4,3,3,22,2,24,25,5,2,2,5,25,4,10,11,2,20,7,13,12,10,14,9,29,5,5,19,16,4,8,28,10,16,6,26,8,9,15,2,15,6,1,1,13,6,7,20],"text":["Attrition<br />Bin: No<br />Correlation: -1","Attrition<br />Bin: Yes<br />Correlation: 1","OverTime<br />Bin: No<br />Correlation: -0.246","OverTime<br />Bin: Yes<br />Correlation: 0.246","JobLevel<br />Bin: 1<br />Correlation: 0.213","MonthlyIncome<br />Bin: -Inf_2695.8<br />Correlation: 0.206","YearsAtCompany<br />Bin: -Inf_2<br />Correlation: 0.205","StockOptionLevel<br />Bin: 0<br />Correlation: 0.195","YearsWithCurrManager<br />Bin: -Inf_1<br />Correlation: 0.182","TotalWorkingYears<br />Bin: -Inf_5<br />Correlation: 0.18","MaritalStatus<br />Bin: Single<br />Correlation: 0.175","Age<br />Bin: -Inf_29<br />Correlation: 0.171","YearsInCurrentRole<br />Bin: -Inf_1<br />Correlation: 0.163","JobRole<br />Bin: Sales_Representative<br />Correlation: 0.157","StockOptionLevel<br />Bin: 1<br />Correlation: -0.151","JobLevel<br />Bin: 2<br />Correlation: -0.131","EnvironmentSatisfaction<br />Bin: 1<br />Correlation: 0.123","JobInvolvement<br />Bin: 1<br />Correlation: 0.117","BusinessTravel<br />Bin: Travel_Frequently<br />Correlation: 0.115","YearsInCurrentRole<br />Bin: 7_Inf<br />Correlation: -0.108","YearsWithCurrManager<br />Bin: 7_Inf<br />Correlation: -0.103","WorkLifeBalance<br />Bin: 1<br />Correlation: 0.099","TotalWorkingYears<br />Bin: 17_Inf<br />Correlation: -0.099","JobRole<br />Bin: Laboratory_Technician<br />Correlation: 0.098","YearsAtCompany<br />Bin: 10_Inf<br />Correlation: -0.097","MonthlyIncome<br />Bin: 9860_Inf<br />Correlation: -0.094","MaritalStatus<br />Bin: Married<br />Correlation: -0.091","JobSatisfaction<br />Bin: 1<br />Correlation: 0.09","JobRole<br />Bin: Research_Director<br />Correlation: -0.089","JobSatisfaction<br />Bin: 4<br />Correlation: -0.088","MaritalStatus<br />Bin: Divorced<br />Correlation: -0.088","JobLevel<br />Bin: 4<br />Correlation: -0.086","Department<br />Bin: Research_&_Development<br />Correlation: -0.085","Age<br />Bin: 34_38<br />Correlation: -0.084","JobRole<br />Bin: Manager<br />Correlation: -0.083","Age<br />Bin: 38_45<br />Correlation: -0.083","JobRole<br />Bin: Manufacturing_Director<br />Correlation: -0.083","Department<br />Bin: Sales<br />Correlation: 0.081","StockOptionLevel<br />Bin: 2<br />Correlation: -0.08","JobRole<br />Bin: Healthcare_Representative<br />Correlation: -0.079","NumCompaniesWorked<br />Bin: 1_3<br />Correlation: -0.078","MonthlyIncome<br />Bin: 4228.8_5743.4<br />Correlation: -0.076","BusinessTravel<br />Bin: Non-Travel<br />Correlation: -0.074","EducationField<br />Bin: Technical_Degree<br />Correlation: 0.069","WorkLifeBalance<br />Bin: 3<br />Correlation: -0.064","JobInvolvement<br />Bin: 4<br />Correlation: -0.064","YearsInCurrentRole<br />Bin: 4_7<br />Correlation: -0.063","TrainingTimesLastYear<br />Bin: 0<br />Correlation: 0.062","TotalWorkingYears<br />Bin: 8_10<br />Correlation: -0.06","RelationshipSatisfaction<br />Bin: 1<br />Correlation: 0.059","TotalWorkingYears<br />Bin: 10_17<br />Correlation: -0.058","NumCompaniesWorked<br />Bin: 5_Inf<br />Correlation: 0.057","JobInvolvement<br />Bin: 3<br />Correlation: -0.056","EducationField<br />Bin: Marketing<br />Correlation: 0.056","DistanceFromHome<br />Bin: -Inf_2<br />Correlation: -0.056","DistanceFromHome<br />Bin: 17_Inf<br />Correlation: 0.054","DailyRate<br />Bin: -Inf_391.8<br />Correlation: 0.054","JobLevel<br />Bin: 5<br />Correlation: -0.054","BusinessTravel<br />Bin: Travel_Rarely<br />Correlation: -0.05","YearsAtCompany<br />Bin: 7_10<br />Correlation: -0.049","MonthlyIncome<br />Bin: 5743.4_9860<br />Correlation: -0.048","EnvironmentSatisfaction<br />Bin: 4<br />Correlation: -0.048","Age<br />Bin: 45_Inf<br />Correlation: -0.048","EducationField<br />Bin: Medical<br />Correlation: -0.047","HourlyRate<br />Bin: 73_87<br />Correlation: -0.047","JobInvolvement<br />Bin: 2<br />Correlation: 0.045","EnvironmentSatisfaction<br />Bin: 3<br />Correlation: -0.044","YearsWithCurrManager<br />Bin: 2_4<br />Correlation: -0.044","TrainingTimesLastYear<br />Bin: 4<br />Correlation: 0.041","YearsAtCompany<br />Bin: 2_5<br />Correlation: -0.04","TrainingTimesLastYear<br />Bin: 6<br />Correlation: -0.04","TrainingTimesLastYear<br />Bin: 3<br />Correlation: -0.04","YearsAtCompany<br />Bin: 5_7<br />Correlation: -0.04","DailyRate<br />Bin: 942.4_1224.2<br />Correlation: -0.039","YearsInCurrentRole<br />Bin: 2_4<br />Correlation: -0.038","TrainingTimesLastYear<br />Bin: 2<br />Correlation: 0.038","HourlyRate<br />Bin: 45_59<br />Correlation: 0.037","EducationField<br />Bin: Human_Resources<br />Correlation: 0.036","JobRole<br />Bin: Human_Resources<br />Correlation: 0.036","DistanceFromHome<br />Bin: 9_17<br />Correlation: 0.035","TrainingTimesLastYear<br />Bin: 5<br />Correlation: -0.035","DailyRate<br />Bin: 1224.2_Inf<br />Correlation: -0.034","YearsInCurrentRole<br />Bin: 1_2<br />Correlation: 0.034","PercentSalaryHike<br />Bin: -Inf_12<br />Correlation: 0.034","EducationField<br />Bin: Life_Sciences<br />Correlation: -0.033","HourlyRate<br />Bin: 59_73<br />Correlation: 0.032","PercentSalaryHike<br />Bin: 13_15<br />Correlation: -0.031","MonthlyRate<br />Bin: 6887.4_11773<br />Correlation: 0.031","YearsSinceLastPromotion<br />Bin: -Inf_1<br />Correlation: 0.03","Gender<br />Bin: Female<br />Correlation: -0.029","Gender<br />Bin: Male<br />Correlation: 0.029","Age<br />Bin: 29_34<br />Correlation: 0.029","Education<br />Bin: 5<br />Correlation: -0.029","TotalWorkingYears<br />Bin: 5_8<br />Correlation: 0.028","YearsWithCurrManager<br />Bin: 4_7<br />Correlation: -0.026","MonthlyRate<br />Bin: 21712_Inf<br />Correlation: 0.026","Education<br />Bin: 3<br />Correlation: 0.026","Education<br />Bin: 4<br />Correlation: -0.026","MonthlyRate<br />Bin: 11773_16714.2<br />Correlation: -0.025","YearsWithCurrManager<br />Bin: 1_2<br />Correlation: -0.024","YearsSinceLastPromotion<br />Bin: 4_Inf<br />Correlation: -0.024","RelationshipSatisfaction<br />Bin: 4<br />Correlation: -0.023","TrainingTimesLastYear<br />Bin: 1<br />Correlation: -0.021","Education<br />Bin: 1<br />Correlation: 0.021","JobRole<br />Bin: Sales_Executive<br />Correlation: 0.02","HourlyRate<br />Bin: -Inf_45<br />Correlation: -0.02","NumCompaniesWorked<br />Bin: -Inf_1<br />Correlation: 0.019","EducationField<br />Bin: Other<br />Correlation: -0.018","RelationshipSatisfaction<br />Bin: 2<br />Correlation: -0.018","Department<br />Bin: Human_Resources<br />Correlation: 0.017","DistanceFromHome<br />Bin: 5_9<br />Correlation: -0.017","JobLevel<br />Bin: 3<br />Correlation: -0.016","MonthlyRate<br />Bin: -Inf_6887.4<br />Correlation: -0.016","MonthlyRate<br />Bin: 16714.2_21712<br />Correlation: -0.016","EnvironmentSatisfaction<br />Bin: 2<br />Correlation: -0.015","WorkLifeBalance<br />Bin: 4<br />Correlation: 0.014","YearsSinceLastPromotion<br />Bin: 1_4<br />Correlation: -0.014","DailyRate<br />Bin: 391.8_656.2<br />Correlation: 0.012","MonthlyIncome<br />Bin: 2695.8_4228.8<br />Correlation: 0.012","RelationshipSatisfaction<br />Bin: 3<br />Correlation: -0.012","WorkLifeBalance<br />Bin: 2<br />Correlation: 0.011","PercentSalaryHike<br />Bin: 15_19<br />Correlation: -0.011","StockOptionLevel<br />Bin: 3<br />Correlation: 0.01","DailyRate<br />Bin: 656.2_942.4<br />Correlation: 0.007","DistanceFromHome<br />Bin: 2_5<br />Correlation: -0.007","JobSatisfaction<br />Bin: 3<br />Correlation: 0.007","Education<br />Bin: 2<br />Correlation: -0.007","JobSatisfaction<br />Bin: 2<br />Correlation: 0.004","PercentSalaryHike<br />Bin: 19_Inf<br />Correlation: 0.003","PerformanceRating<br />Bin: 3<br />Correlation: -0.003","PerformanceRating<br />Bin: 4<br />Correlation: 0.003","NumCompaniesWorked<br />Bin: 3_5<br />Correlation: 0.002","PercentSalaryHike<br />Bin: 12_13<br />Correlation: 0.002","HourlyRate<br />Bin: 87_Inf<br />Correlation: -0.001","JobRole<br />Bin: Research_Scientist<br />Correlation: 0"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(44,62,80,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":165.844748858448},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187},"title":{"text":"Correlation Funnel","font":{"color":"rgba(44,62,80,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.1,1.1],"tickmode":"array","ticktext":["-1.0","-0.5","0.0","0.5","1.0"],"tickvals":[-1,-0.5,0,0.5,1],"categoryorder":"array","categoryarray":["-1.0","-0.5","0.0","0.5","1.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y","title":{"text":"correlation","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,31.6],"tickmode":"array","ticktext":["PerformanceRating","Education","Gender","YearsSinceLastPromotion","MonthlyRate","PercentSalaryHike","HourlyRate","DailyRate","DistanceFromHome","RelationshipSatisfaction","TrainingTimesLastYear","EducationField","NumCompaniesWorked","Department","JobSatisfaction","WorkLifeBalance","BusinessTravel","JobInvolvement","EnvironmentSatisfaction","JobRole","YearsInCurrentRole","Age","MaritalStatus","TotalWorkingYears","YearsWithCurrManager","StockOptionLevel","YearsAtCompany","MonthlyIncome","JobLevel","OverTime","Attrition"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"categoryorder":"array","categoryarray":["PerformanceRating","Education","Gender","YearsSinceLastPromotion","MonthlyRate","PercentSalaryHike","HourlyRate","DailyRate","DistanceFromHome","RelationshipSatisfaction","TrainingTimesLastYear","EducationField","NumCompaniesWorked","Department","JobSatisfaction","WorkLifeBalance","BusinessTravel","JobInvolvement","EnvironmentSatisfaction","JobRole","YearsInCurrentRole","Age","MaritalStatus","TotalWorkingYears","YearsWithCurrManager","StockOptionLevel","YearsAtCompany","MonthlyIncome","JobLevel","OverTime","Attrition"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":{"text":"feature","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"363246d0de5":{"xintercept":{},"type":"scatter"},"363213ab37a8":{"x":{},"y":{},"text":{}}},"cur_data":"363246d0de5","visdat":{"363246d0de5":["function (y) ","x"],"363213ab37a8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>By using our correlation value of 0.1 as a cutoff, the analysis suggests the inclusion of fifteen variables for clustering: from overtime to business travel. In preparation for the analysis, any of these fifteen variables which are of a character data type (e.g.&nbsp;MaritalStatus = Single) are converted to a factor datatype (more on this below).</p>
<p><br></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select the variables we wish to include in the analysis</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>var_selection <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"EmployeeNumber"</span>, <span class="st">"Attrition"</span>, <span class="st">"OverTime"</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"JobLevel"</span>, <span class="st">"MonthlyIncome"</span>, <span class="st">"YearsAtCompany"</span>, </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"StockOptionLevel"</span>, <span class="st">"YearsWithCurrManager"</span>, </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"TotalWorkingYears"</span>, <span class="st">"MaritalStatus"</span>, <span class="st">"Age"</span>, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"YearsInCurrentRole"</span>, <span class="st">"JobRole"</span>, <span class="st">"EnvironmentSatisfaction"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"JobInvolvement"</span>, <span class="st">"BusinessTravel"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>hr_subset_tbl <span class="ot">&lt;-</span> hr_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select our variables listed above</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">one_of</span>(var_selection)) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert the character variables to factors</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_if</span>(is.character, as_factor) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># recorder the variables</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(EmployeeNumber, Attrition, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="analysis-gower-distance" class="level1">
<h1>3. Analysis: Gower Distance</h1>
<p>In essence, clustering is all about determining how similar (or dissimilar) cases in a dataset are to one another so that we can then group them together. To do this we first need to give each case (i.e., employee) a score based on the fifteen variables selected and then determine the difference between employees based on this score.</p>
<p>The most common way of performing this activity is by calculating the “Euclidean Distance”. However, Euclidean Distance is effective when analysing continuous variables (e.g., age, salary, tenure), and thus is not suitable for our HR dataset, which includes ordinal (e.g., EnvironmentSatisfaction – values from 1 = worst to 5 = best) and nominal data types (MaritalStatus – 1 = Single, 2 = Divorced, etc.). Therefore, we have to use a distance metric that can handle different data types; the Gower Distance.</p>
<p>The main advantage of Gower Distance is that it is simple to calculate and intuitive to understand. However, the disadvantage of this method is that it requires a distance matrix, a data structure that compares each case to every other case in the dataset, which needs considerable computing power and memory for large datasets.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Gower distance and covert to a matrix</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>gower_dist <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">daisy</span>(hr_subset_tbl[, <span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>], <span class="at">metric =</span> <span class="st">"gower"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>gower_mat <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">as.matrix</span>(gower_dist)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can perform a sanity check on our distance matrix by determining the most similar and/or dissimilar pair of employees. Here we calculate the two most similar employees according to their Gower Distance score.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print most similar employees </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>similar_tbl <span class="ot">&lt;-</span> hr_subset_tbl[<span class="fu">which</span>(gower_mat <span class="sc">==</span> <span class="fu">min</span>(gower_mat[gower_mat <span class="sc">!=</span> <span class="fu">min</span>(gower_mat)]), </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">arr.ind =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span>, ], ]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the results to a datatable and save as a png file </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>similar_employees <span class="ot">&lt;-</span> similar_tbl <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert to a datatable</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">rownames =</span> <span class="cn">FALSE</span>, <span class="at">caption =</span> <span class="st">'Table of two most similar employees'</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                                <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">targets   =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">15</span>)),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">dom            =</span> <span class="st">'t'</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                                <span class="at">scrollX        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                                <span class="at">scrollCollapse =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>similar_employees</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-669563c90b49e3b2029f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-669563c90b49e3b2029f">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table of two most similar employees<\/caption>","data":[[1624,614],["Yes","Yes"],["Yes","Yes"],[1,1],[1569,1878],[0,0],[0,0],[0,0],[0,0],["Single","Single"],[18,18],[0,0],["Sales Representative","Sales Representative"],[2,2],[3,3],["Travel_Frequently","Travel_Frequently"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>EmployeeNumber<\/th>\n      <th>Attrition<\/th>\n      <th>OverTime<\/th>\n      <th>JobLevel<\/th>\n      <th>MonthlyIncome<\/th>\n      <th>YearsAtCompany<\/th>\n      <th>StockOptionLevel<\/th>\n      <th>YearsWithCurrManager<\/th>\n      <th>TotalWorkingYears<\/th>\n      <th>MaritalStatus<\/th>\n      <th>Age<\/th>\n      <th>YearsInCurrentRole<\/th>\n      <th>JobRole<\/th>\n      <th>EnvironmentSatisfaction<\/th>\n      <th>JobInvolvement<\/th>\n      <th>BusinessTravel<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}],"dom":"t","scrollX":true,"scrollCollapse":true,"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>We learn from our sanity check in the table above that EmployeeID 1624 and EmployeeID 614, let’s call them Bob and Fred, are considered to be the most similar in the dataset. Looking at the table we can see that their values for fourteen of the fifteen variables are identical – only monthly salary differs slightly. The Gower Distance seems to be working and the output makes sense, now let’s perform the cluster analysis to see if we can understand turnover.</p>
<p><br></p>
</section>
<section id="analysis-how-many-clusters" class="level1">
<h1>4. Analysis: How many Clusters?</h1>
<p>The one big question that must be answered when performing cluster analysis is “how many clusters should we segment the dataset into?”</p>
<p>We can use a data-driven approach to determine the optimal number of clusters by calculating the silhouette width. With this metric, we measure how similar each observation (i.e., in our case one employee) is to its assigned cluster, and conversely how dissimilar it is to neighbouring clusters. The metric can range from -1 to 1, where values of 1 show a clear cluster assignment, 0 suggests weak cluster assignment (i.e., a case could have been assigned to one of two neighbouring clusters) and -1 wrong cluster assignment.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># perform the cluster analysis multiple times with different numbers of clusters</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>sil_width <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_dbl</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>, <span class="cf">function</span>(k){</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  model <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">pam</span>(gower_dist, <span class="at">k =</span> k)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  model<span class="sc">$</span>silinfo<span class="sc">$</span>avg.width</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># create a tibble with each row representing the cluster number </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># and average silhouette width</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>sil_tbl <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">sil_width =</span> sil_width</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># visualize the clusters numbers and average silhouette width to </span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># identify the optimal number of clusters</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>fig2 <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(sil_tbl, <span class="fu">aes</span>(<span class="at">x =</span> k, <span class="at">y =</span> sil_width)) <span class="sc">+</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(fig2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-a96af68c8a2df7d476da" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a96af68c8a2df7d476da">{"x":{"data":[{"x":[2,3,4,5,6,7,8,9,10],"y":[0.128925990605184,0.128556845639092,0.121152291482427,0.119881619475743,0.143552339250341,0.123045329075571,0.12897038257169,0.127843144864784,0.124663465942131],"text":["k:  2<br />sil_width: 0.1289260","k:  3<br />sil_width: 0.1285568","k:  4<br />sil_width: 0.1211523","k:  5<br />sil_width: 0.1198816","k:  6<br />sil_width: 0.1435523","k:  7<br />sil_width: 0.1230453","k:  8<br />sil_width: 0.1289704","k:  9<br />sil_width: 0.1278431","k: 10<br />sil_width: 0.1246635"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":7.55905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":54.7945205479452},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.6,10.4],"tickmode":"array","ticktext":["2","3","4","5","6","7","8","9","10"],"tickvals":[2,3,4,5,6,7,8,9,10],"categoryorder":"array","categoryarray":["2","3","4","5","6","7","8","9","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"k","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.118698083487013,0.144735875239071],"tickmode":"array","ticktext":["0.120","0.125","0.130","0.135","0.140"],"tickvals":[0.12,0.125,0.13,0.135,0.14],"categoryorder":"array","categoryarray":["0.120","0.125","0.130","0.135","0.140"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"sil_width","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"36324f785bef":{"x":{},"y":{},"type":"scatter"},"363266dbd0ab":{"x":{},"y":{}}},"cur_data":"36324f785bef","visdat":{"36324f785bef":["function (y) ","x"],"363266dbd0ab":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>To identify the number of clusters with the highest average silhouette width, we perform the cluster analysis with differing numbers of clusters. In our case we choose two through to ten clusters. The reason we limited the maximum number of clusters to ten is that the larger numbers become the more difficult it becomes to interpret and ultimately act upon. As can be seen from the graph, six clusters generated the highest average silhouette width and will therefore be used in our analysis.</p>
<p>It is important to note that the average silhouette value (0.14) is actually quite low. According to anecdotal evidence, we would ideally want, at a minimum, a value between 0.25 and 0.5 (see <a href="https://onlinelibrary.wiley.com/doi/book/10.1002/9780470316801">Kaufmann and Rousseuw, 1990</a>). Our low value might be indicative of limited structure in the data, or some clusters being weaker than others (i.e., some clusters group loosely, while others group tightly). To better understand the low value we have opted to look at the practical insights generated by the clusters and to visualise the cluster structure using t-Distributed Stochastic Neighbour Embedding (t-SNE). Both of these are explained below.</p>
<p><br></p>
</section>
<section id="analysis-interpreting-the-clusters" class="level1">
<h1>5. Analysis: Interpreting the Clusters</h1>
<p>A topic we have not addressed yet, despite having already performed the clustering, is the method of cluster analysis employed.</p>
<p>In this analysis, we used the Partitioning Around Medoids (PAM) method. This method is identical to K-Means which is the most common form of clustering practiced. The only difference is that cluster centres for PAM are defined by the raw dataset observations, which in our example are our fifteen variables. This PAM approach has two key benefits over K-Means clustering. Firstly, it is less sensitive to outliers (e.g., such as a very high monthly income). Secondly, PAM also provides an exemplar case for each cluster, called a “Medoid”, which makes cluster interpretation easier.</p>
<p>With that this in mind, let’s re-run the cluster analysis with 6 clusters, as informed by our average silhouette width, join the cluster analysis results with our original dataset to identify into which cluster each individual falls, and then take a closer look at the six Medoids representing our six clusters.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set the number of clusters</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># rerun the cluster analysis with 6 clusters</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>pam_fit <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">pam</span>(gower_dist, <span class="at">diss =</span> <span class="cn">TRUE</span>, k)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># add the cluster assignment to each employee</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>hr_subset_tbl <span class="ot">&lt;-</span> hr_subset_tbl <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cluster =</span> pam_fit<span class="sc">$</span>clustering) </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># have a look at the Medoids to understand the clusters</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>hr_subset_tbl[pam_fit<span class="sc">$</span>medoids, ] <span class="sc">%&gt;%</span> </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add the cluster column to the front</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(cluster, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert to a datatable, ensuring all rows are visible</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">rownames =</span> <span class="cn">FALSE</span>, <span class="at">caption =</span> <span class="st">'Cluster Medoids'</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>                                <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">className =</span> <span class="st">'dt-center'</span>, </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">targets   =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">16</span>)),</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>                                <span class="at">dom            =</span> <span class="st">'t'</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>                                <span class="at">scrollX        =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">scrollCollapse =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-f58e03fd9ac6ce8f6b36" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f58e03fd9ac6ce8f6b36">{"x":{"filter":"none","vertical":false,"caption":"<caption>Cluster Medoids<\/caption>","data":[[1,2,3,4,5,6],[1171,35,65,221,747,1408],["No","No","Yes","No","No","No"],["No","No","Yes","No","No","No"],[2,2,1,1,2,4],[5155,6825,3441,2713,5304,16799],[6,9,2,5,8,20],[0,1,0,1,1,1],[5,2,2,2,7,9],[9,10,2,5,10,21],["Single","Married","Single","Married","Divorced","Married"],[42,42,28,28,30,42],[4,7,2,2,7,7],["Sales Executive","Sales Executive","Laboratory Technician","Research Scientist","Sales Executive","Manager"],[2,3,3,3,3,3],[3,3,3,3,3,3],["Travel_Rarely","Travel_Rarely","Travel_Rarely","Travel_Rarely","Travel_Rarely","Travel_Rarely"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>cluster<\/th>\n      <th>EmployeeNumber<\/th>\n      <th>Attrition<\/th>\n      <th>OverTime<\/th>\n      <th>JobLevel<\/th>\n      <th>MonthlyIncome<\/th>\n      <th>YearsAtCompany<\/th>\n      <th>StockOptionLevel<\/th>\n      <th>YearsWithCurrManager<\/th>\n      <th>TotalWorkingYears<\/th>\n      <th>MaritalStatus<\/th>\n      <th>Age<\/th>\n      <th>YearsInCurrentRole<\/th>\n      <th>JobRole<\/th>\n      <th>EnvironmentSatisfaction<\/th>\n      <th>JobInvolvement<\/th>\n      <th>BusinessTravel<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}],"dom":"t","scrollX":true,"scrollCollapse":true,"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>The Medoids, which are the exemplar cases (i.e., employee) for each cluster, are presented in the table above. These Medoids can be useful in the creation of Persona’s if we were looking to operationlise results (discussed below).</p>
<p>To better understand attrition in our population we calculated the rate of attrition in each cluster, and how much each cluster captures overall attrition in our dataset.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{dmckinnon2020,
  author = {Adam D McKinnon and Monica Ashton},
  title = {A {People} {Analytics} {Tutorial} on {Unsupervised} {Machine}
    {Learning}},
  date = {2020-08-04},
  url = {https://www.adam-d-mckinnon.com//posts/2020-08-04-cluster_analysis},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-dmckinnon2020" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Adam D McKinnon, and Monica Ashton. 2020. <span>“A People Analytics
Tutorial on Unsupervised Machine Learning.”</span> August 4, 2020. <a href="https://www.adam-d-mckinnon.com//posts/2020-08-04-cluster_analysis">https://www.adam-d-mckinnon.com//posts/2020-08-04-cluster_analysis</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>