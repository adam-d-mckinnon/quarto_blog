<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adam D McKinnon">
<meta name="dcterms.date" content="2021-06-06">
<meta name="description" content="A practical guide to measuring distance using Google Maps in R.">

<title>Adam D McKinnon - Going the Distance!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/echarts4r-4.8.0/echarts-en.min.js"></script>
<script src="../../site_libs/echarts4r-4.8.0/ecStat.min.js"></script>
<script src="../../site_libs/echarts4r-4.8.0/dataTool.min.js"></script>
<script src="../../site_libs/echarts4r-binding-0.4.4/echarts4r.js"></script>
<script src="../../site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="../../site_libs/react-17.0.0/react.min.js"></script>
<script src="../../site_libs/react-17.0.0/react-dom.min.js"></script>
<script src="../../site_libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="../../site_libs/reactable-binding-0.3.0/reactable.js"></script>


<link rel="stylesheet" href="../../theme.scss">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Adam D McKinnon</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/adamdmckinnon/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/adam-d-mckinnon"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Going the Distance!</h1>
                  <div>
        <div class="description">
          A practical guide to measuring distance using Google Maps in R.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Google Maps</div>
                <div class="quarto-category">googleway</div>
                <div class="quarto-category">echarts4r</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Adam D McKinnon </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 6, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#calling-google-maps" id="toc-calling-google-maps" class="nav-link" data-scroll-target="#calling-google-maps">1. Calling Google Maps</a></li>
  <li><a href="#unpacking-the-data" id="toc-unpacking-the-data" class="nav-link" data-scroll-target="#unpacking-the-data">2. Unpacking the Data</a></li>
  <li><a href="#creating-insights" id="toc-creating-insights" class="nav-link" data-scroll-target="#creating-insights">3. Creating Insights</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="emile-seguin-wf5ZJ2s-B7I-unsplash.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Photo by <a href="https://unsplash.com/@emileseguin">Émile Séguin</a> on <a href="https://unsplash.com/">Unsplash</a>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Two years ago I sat in an elevated office in Germany discussing with a colleague the value of knowing someone’s commute distance to inform their voluntary departure risk. When we worked on generating this variable neither of us could do it! Our flight risk model progressed without this variable. Months later a pandemic hit and the conversation has since (understandably) been firmly ensconced in remote and hybrid models of working. However, many sectors remain sensitive to the need to interact in person. Hospitality, Tourism and to a varying extent Retail, are indicative of this requirement.</p>
<p>It was therefore, interesting when two years later, a bit more experience under my belt (i.e., mistakes that I had learned from), I was again presented this challenge. The context was simple, a retail business was moving location and wanted to know which employees were likely to be adversely impacted. This information was to be used to inform communication efforts in advance of the move.</p>
<p>The following provides a practical guide to measuring distances using Google Maps in R. The process involves the following steps:</p>
<ol type="1">
<li><p>Calling Google Maps,</p></li>
<li><p>Unpacking the returned data,</p></li>
<li><p>Generating insights.</p></li>
</ol>
<p><br></p>
<section id="calling-google-maps" class="level2">
<h2 class="anchored" data-anchor-id="calling-google-maps">1. Calling Google Maps</h2>
<p>To use Google Maps you will need three things:</p>
<ol type="i">
<li><p><strong>Address data.</strong> We begin by loading some fictitious address data provided by the Victorian State Government – School addresses from 2015.</p></li>
<li><p><strong>Workplace addresses</strong>, both an old workplace address and a new workplace address. For this example, I am using the following two addresses from Victoria, Australia:</p></li>
</ol>
<blockquote class="blockquote">
<ol type="a">
<li>Old workplace address: 154 High St, Ashburton VIC 3147, Australia (Ashburton Public Library); and</li>
</ol>
</blockquote>
<blockquote class="blockquote">
<ol start="2" type="a">
<li>New workplace address: Spring St, East Melbourne VIC 3002, Australia (Victorian Parliament Building).</li>
</ol>
</blockquote>
<ol start="3" type="i">
<li><strong>A Google Maps API key</strong>, which can be set up on the <a href="https://developers.google.com/maps">Google Maps Developer Site</a>. The Google Maps service has a free usage quota. To access Google Maps we will use the googleway library in R.</li>
</ol>
<p>With all three pieces ready, we will then call Google Maps using the googleway::google_distance function. We will do this for two modes of transit:</p>
<ol type="1">
<li><p>Public Transport (called “Transit”) &amp;</p></li>
<li><p>Car.</p></li>
</ol>
<div class="cell" data-code_folding="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rrapply)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googleway)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(echarts4r)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># # Set API key ----</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>key <span class="ot">=</span> my_api_key <span class="co"># enter your API key here</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Import Data ----</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>original_locations_tbl <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="st">"http://www.education.vic.gov.au/Documents/about/research/datavic/dv165-allschoolslocationlist2015.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                          janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># limit the address data to schools in the Greater Melbourne local government area's</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>councils <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Bayside (C)"</span>, <span class="st">"Port Phillip (C)"</span>, <span class="st">"Stonnington (C)"</span>, <span class="st">"Casey (C)"</span>, <span class="st">"Melbourne (C)"</span>, </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Frankston (C)"</span>, <span class="st">"Glen Eira (C)"</span>, <span class="st">"Monash (C)"</span>, <span class="st">"Yarra (C)"</span>, <span class="st">"Moonee Valley (C)"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># create an address dataset</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>addresses_tbl <span class="ot">&lt;-</span> original_locations_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create and format the home address field, and create the old and new workplace addresses</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">home_address =</span> base<span class="sc">::</span><span class="fu">paste0</span>(address_line_1, <span class="st">", "</span>, address_town, <span class="st">" "</span>, address_state, <span class="st">" "</span>,address_postcode),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">old_work_address =</span> <span class="st">"154 High St, Ashburton VIC 3147"</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_work_address =</span> <span class="st">"Spring St, East Melbourne VIC 3002"</span>,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">employee         =</span> <span class="fu">paste0</span>(<span class="st">"Employee "</span>, <span class="fu">row_number</span>())  </span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only include addresses from areas around Melbourne</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(lga_name <span class="sc">%in%</span> councils) <span class="sc">%&gt;%</span> </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># randomly select 100 records</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">sample_n</span>(<span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(employee, home_address, old_work_address, new_work_address)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dataset</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co"># head(addresses_tbl)</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="co"># call Google Maps using googleway to calculate the distance and time for the old and new workplace locations</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># the calculations are repeated for both public transport and car modes of transport</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>commute_tbl <span class="ot">&lt;-</span> addresses_tbl <span class="sc">%&gt;%</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">old_transit_calculations =</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> home_address,</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.y =</span> old_work_address,</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.f =</span> <span class="sc">~</span> googleway<span class="sc">::</span><span class="fu">google_distance</span>(<span class="at">origins      =</span> .x,</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">destinations =</span> .y,</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">mode         =</span> <span class="st">"transit"</span>,</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">key          =</span> key,</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">simplify     =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_transit_calculations =</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> home_address,</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.y =</span> new_work_address,</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.f =</span> <span class="sc">~</span> googleway<span class="sc">::</span><span class="fu">google_distance</span>(<span class="at">origins      =</span> .x,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">destinations =</span> .y,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">mode         =</span> <span class="st">"transit"</span>,</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">key          =</span> key,</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">simplify     =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">old_car_calculations     =</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> home_address,</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.y =</span> old_work_address,</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.f =</span> <span class="sc">~</span> googleway<span class="sc">::</span><span class="fu">google_distance</span>(<span class="at">origins      =</span> .x,</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">destinations =</span> .y,</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">mode         =</span> <span class="st">"driving"</span>,</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">key          =</span> key,</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">simplify     =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_car_calculations     =</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="at">.x =</span> home_address,</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.y =</span> new_work_address,</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">.f =</span> <span class="sc">~</span> googleway<span class="sc">::</span><span class="fu">google_distance</span>(<span class="at">origins      =</span> .x,</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">destinations =</span> .y,</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">mode         =</span> <span class="st">"driving"</span>,</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">key          =</span> key,</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>                                                                                 <span class="at">simplify     =</span> <span class="cn">TRUE</span>))</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="unpacking-the-data" class="level2">
<h2 class="anchored" data-anchor-id="unpacking-the-data">2. Unpacking the Data</h2>
<p>The data returned from the google_distance function is complicated! Consequently, it required some fiddling to unpack and format in a usable fashion. While the approach developed works, I strongly suspect it could be better. Searching online has yielded several alternatives. However, I decided to stay with my own and welcome suggested improvements.</p>
<div class="cell" data-code_folding="true">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cleaning function for results</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>results_cleaner <span class="ot">&lt;-</span> <span class="cf">function</span>(data, old_or_new, car_or_transit){</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># for renaming multiple variables from the API call</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    var_string <span class="ot">&lt;-</span> <span class="fu">paste0</span>(old_or_new, <span class="st">"_"</span>, car_or_transit, <span class="st">"_"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># for renaming the status field</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    new_name   <span class="ot">&lt;-</span> <span class="fu">paste0</span>(var_string, <span class="st">"status"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># receive the data</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        rrapply<span class="sc">::</span><span class="fu">rrapply</span>(<span class="at">how =</span> <span class="st">"bind"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">7</span>) <span class="sc">|&gt;</span> <span class="co"># remove the last two columns</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">rename_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">"rows_elements_1_"</span>)), <span class="sc">~</span> <span class="fu">str_replace_all</span>(., </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="at">pattern     =</span> <span class="st">"rows_elements_1_"</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                                                                              <span class="at">replacement =</span> var_string) </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                                                                              ) <span class="sc">|&gt;</span> </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        dplyr<span class="sc">::</span><span class="fu">rename</span>( <span class="sc">!!</span> <span class="fu">quo_name</span>(new_name) <span class="sc">:</span><span class="er">=</span> status)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># clean the final results for the old commute by public transport</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>old_transit_commute_tbl <span class="ot">&lt;-</span> commute_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(old_transit_calculations) <span class="sc">%&gt;%</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">results_cleaner</span>(<span class="at">old_or_new =</span> <span class="st">"old"</span>, <span class="at">car_or_transit =</span> <span class="st">"transit"</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># clean the final results for the new commute by public transport</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>new_transit_commute_tbl <span class="ot">&lt;-</span> commute_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(new_transit_calculations) <span class="sc">%&gt;%</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">results_cleaner</span>(<span class="at">old_or_new =</span> <span class="st">"new"</span>, <span class="at">car_or_transit =</span> <span class="st">"transit"</span>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># clean the final results for the old commute by car</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>old_car_commute_tbl <span class="ot">&lt;-</span> commute_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(old_car_calculations) <span class="sc">%&gt;%</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">results_cleaner</span>(<span class="at">old_or_new =</span> <span class="st">"old"</span>, <span class="at">car_or_transit =</span> <span class="st">"car"</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="co"># clean the final results for the old commute by car</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>new_car_commute_tbl <span class="ot">&lt;-</span> commute_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(new_car_calculations) <span class="sc">%&gt;%</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">results_cleaner</span>(<span class="at">old_or_new =</span> <span class="st">"new"</span>, <span class="at">car_or_transit =</span> <span class="st">"car"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co"># connect the original data with the new clean distance and time results</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>total_commute_tbl <span class="ot">&lt;-</span> addresses_tbl <span class="sc">%&gt;%</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(old_transit_commute_tbl) <span class="sc">%&gt;%</span> <span class="co"># add the columns of the old commute by public transport</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(new_transit_commute_tbl) <span class="sc">%&gt;%</span> <span class="co"># add the columns of the new commute by public transport</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(old_car_commute_tbl) <span class="sc">%&gt;%</span> <span class="co"># add the columns of the old commute by car</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(new_car_commute_tbl) <span class="sc">%&gt;%</span> <span class="co"># add the columns of the new commute by car</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># filter out any results that were not OK</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(old_transit_status <span class="sc">==</span> <span class="st">"OK"</span> <span class="sc">|</span> </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>                  new_transit_status <span class="sc">==</span> <span class="st">"OK"</span> <span class="sc">|</span> </span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>                  old_car_status     <span class="sc">==</span> <span class="st">"OK"</span> <span class="sc">|</span> </span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>                  new_car_status     <span class="sc">==</span> <span class="st">"OK"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br></p>
</section>
<section id="creating-insights" class="level2">
<h2 class="anchored" data-anchor-id="creating-insights">3. Creating Insights</h2>
<p>The data returned from googleway provides both the travel distance between the two points, and time required to complete the trip for the selected mode of transit. From here it is important to gauge the following:</p>
<p><br></p>
<section id="are-people-generally-better-off-travelling-to-the-new-office-location" class="level4">
<h4 class="anchored" data-anchor-id="are-people-generally-better-off-travelling-to-the-new-office-location">1. Are people generally better off travelling to the new office location?</h4>
<p>This can be examined by both distance and time. However, in a city a short trip can still take considerable time. Therefore, examining the difference in time taken for the shortest option (i.e., car or public transport) appears more realistic / accurate. If the time decreased by more than 5 minutes, an improvement in commute is assumed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate value in Minutes (default results are in seconds)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>scale_mins <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">/</span> <span class="dv">60</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate value in Kilometres (default results are in metres)</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>scale_kms <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">1</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>final_commute_details_tbl <span class="ot">&lt;-</span> total_commute_tbl <span class="sc">|&gt;</span> </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># covert all duration variable values to minutes</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">ends_with</span>(<span class="st">"duration_value"</span>)), scale_mins) <span class="sc">%&gt;%</span> </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># covert all distance variable values to kilometres</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">ends_with</span>(<span class="st">"distance_value"</span>)), scale_kms) <span class="sc">%&gt;%</span> </span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate the difference in distance and time between the new and old locations</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: calculations are based on new - old. Therefore, negative numbers indicate less distance and time, </span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># whereas positive numbers indicate an increase in distance and time</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_transit_commute_distance =</span> new_transit_distance_value <span class="sc">-</span> old_transit_distance_value,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_transit_commute_time     =</span> new_transit_duration_value <span class="sc">-</span> old_transit_duration_value,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_car_commute_distance     =</span> new_car_distance_value <span class="sc">-</span> old_car_distance_value,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">diff_car_commute_time         =</span> new_car_duration_value <span class="sc">-</span> old_car_duration_value,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># find the shortest time (i.e., transit or car) for both the old and new offices</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">old_office_min_mins =</span> base<span class="sc">::</span><span class="fu">ifelse</span>(old_transit_duration_value <span class="sc">&lt;</span> old_car_duration_value, </span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>                                           old_transit_duration_value, old_car_duration_value),</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_office_min_mins =</span> base<span class="sc">::</span><span class="fu">ifelse</span>(new_transit_duration_value <span class="sc">&lt;</span> new_car_duration_value, </span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>                                           new_transit_duration_value, new_car_duration_value),</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>        <span class="co"># find the differences in the best commute times between the two locations</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_office_best_commute_diff =</span> new_office_min_mins <span class="sc">-</span> old_office_min_mins,</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        <span class="co"># find which is the better commute for each person (new office, old office, or similar). This assumes </span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>        <span class="co"># that a commute is better if the commute time is reduced by more than 5 minutes</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">preferred_commute_location   =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>((old_office_min_mins <span class="sc">-</span> new_office_min_mins) <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"Old Office"</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>                                                        (new_office_min_mins <span class="sc">-</span> old_office_min_mins) <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"New Office"</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>                                                        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Similar Commute"</span>),</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>        <span class="co"># determine the best mode of transport for the new location</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">preferred_mode_transport     =</span> base<span class="sc">::</span><span class="fu">ifelse</span>(new_transit_duration_value <span class="sc">&lt;=</span> new_car_duration_value, <span class="st">"Public Transport"</span>, <span class="st">"Car"</span>)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>                                        </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="co"># visually represent the impact of the new location to travel time</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>final_commute_details_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(preferred_commute_location) <span class="sc">%&gt;%</span> </span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_chart</span>(preferred_commute_location) <span class="sc">%&gt;%</span> </span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_bar</span>(n) <span class="sc">%&gt;%</span> </span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_labels</span>(<span class="at">position =</span> <span class="st">"insideTop"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_legend</span>(<span class="at">show =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_title</span>(<span class="at">text =</span> <span class="st">"Preferred Office Location Based on Travel Time"</span>,</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Preferred Location Is Defined by A Reduction In Travel Time Of More Than 5 Minutes"</span>,</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>                     <span class="at">left =</span> <span class="st">"10%"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  echarts4r<span class="sc">::</span><span class="fu">e_tooltip</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-1127380b4c027caf3709" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-1127380b4c027caf3709">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"yAxis":[{"show":true}],"xAxis":[{"data":["New Office","Old Office","Similar Commute"],"type":"category","boundaryGap":true}],"legend":{"data":["n"],"show":false,"type":"plain"},"series":[{"data":[{"value":["New Office","10"]},{"value":["Old Office","63"]},{"value":["Similar Commute","27"]}],"name":"n","type":"bar","yAxisIndex":0,"xAxisIndex":0,"coordinateSystem":"cartesian2d","label":{"show":true,"position":"insideTop"}}],"title":[{"left":"10%","text":"Preferred Office Location Based on Travel Time","subtext":"Preferred Location Is Defined by A Reduction In Travel Time Of More Than 5 Minutes"}],"tooltip":{"trigger":"item"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The visualisation above depicts how the location change will impact employee travel, and it appears the majority of individuals will be worse off when commuting to the new location.</p>
<p><br></p>
</section>
<section id="which-individuals-will-have-shorter-or-longer-travel-times" class="level4">
<h4 class="anchored" data-anchor-id="which-individuals-will-have-shorter-or-longer-travel-times">2. Which individuals will have shorter or longer travel times?</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>final_commute_details_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select the preferred variables</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(employee, home_address, preferred_commute_location, new_office_best_commute_diff,preferred_mode_transport, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                new_transit_duration_value, diff_transit_commute_time, new_car_duration_value, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                diff_car_commute_time) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(new_office_best_commute_diff) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename the variables for more readable output</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">Employee =</span> employee,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Home Address</span><span class="st">`</span><span class="ot">=</span> home_address,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Preferred Office</span><span class="st">`</span> <span class="ot">=</span> preferred_commute_location,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Commute Change (Mins)</span><span class="st">`</span> <span class="ot">=</span> new_office_best_commute_diff,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Preferred Transport for New Office</span><span class="st">`</span> <span class="ot">=</span> preferred_mode_transport,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Time via Public Transport (Mins)</span><span class="st">`</span> <span class="ot">=</span> new_transit_duration_value,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Public Transport Time Saving (Mins)</span><span class="st">`</span> <span class="ot">=</span> diff_transit_commute_time,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Time via Car (Mins)</span><span class="st">`</span> <span class="ot">=</span> new_car_duration_value,</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">Car Time Saving (Mins)</span><span class="st">`</span> <span class="ot">=</span> diff_car_commute_time) <span class="sc">%&gt;%</span> </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  reactable<span class="sc">::</span><span class="fu">reactable</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># pagination and searching options</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">showPageSizeOptions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">pageSizeOptions =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">100</span>),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">5</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># table formatting options</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlined =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">borderless =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">striped =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">resizable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># column width</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">list</span>(</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">Employee =</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>),</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Home Address</span><span class="st">`</span> <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">175</span>),</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Preferred Office</span><span class="st">`</span> <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Commute Change (Mins)</span><span class="st">`</span> <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Preferred Transport for New Office</span><span class="st">`</span>  <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Time via Public Transport (Mins)</span><span class="st">`</span>  <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Public Transport Time Saving (Mins)</span><span class="st">`</span>  <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Time via Car (Mins)</span><span class="st">`</span> <span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Car Time Saving (Mins)</span><span class="st">`</span><span class="ot">=</span> reactable<span class="sc">::</span><span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>, <span class="at">align =</span> <span class="st">"center"</span>)</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># theming changes    </span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> reactable<span class="sc">::</span><span class="fu">reactableTheme</span>(</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">highlightColor =</span> <span class="st">"#f0f5f9"</span>,</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">cellPadding =</span> <span class="st">"8px 12px"</span>,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">style =</span> <span class="fu">list</span>(<span class="at">fontFamily =</span> <span class="st">"-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif"</span>))</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="htmlwidget-fd1c2f55611c286c9d2d" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-fd1c2f55611c286c9d2d">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Employee":["Employee 1622","Employee 2178","Employee 2166","Employee 2193","Employee 53","Employee 255","Employee 1800","Employee 1391","Employee 229","Employee 217","Employee 600","Employee 953","Employee 1271","Employee 640","Employee 1689","Employee 1721","Employee 1328","Employee 797","Employee 674","Employee 1807","Employee 1385","Employee 1665","Employee 711","Employee 1848","Employee 1740","Employee 1267","Employee 628","Employee 2168","Employee 461","Employee 482","Employee 250","Employee 1466","Employee 262","Employee 1732","Employee 358","Employee 1751","Employee 599","Employee 614","Employee 1793","Employee 1729","Employee 1824","Employee 2164","Employee 1033","Employee 1829","Employee 839","Employee 974","Employee 1083","Employee 1458","Employee 1162","Employee 2052","Employee 1707","Employee 1506","Employee 2139","Employee 1086","Employee 1478","Employee 925","Employee 1255","Employee 2103","Employee 1076","Employee 1505","Employee 1950","Employee 2108","Employee 2093","Employee 876","Employee 1180","Employee 1396","Employee 1031","Employee 649","Employee 1951","Employee 1029","Employee 1096","Employee 951","Employee 1904","Employee 1763","Employee 978","Employee 1099","Employee 1133","Employee 750","Employee 824","Employee 607","Employee 992","Employee 282","Employee 804","Employee 1088","Employee 752","Employee 1398","Employee 2198","Employee 1874","Employee 2001","Employee 1171","Employee 1860","Employee 591","Employee 666","Employee 1685","Employee 1744","Employee 1843","Employee 1044","Employee 1895","Employee 1935","Employee 976"],"Home Address":["88 Nicholson Street, FITZROY VIC 3065","185 Spring Street, MELBOURNE VIC 3000","Level 1, 252 Lygon Street, CARLTON VIC 3053","96 Barkly Street, NORTH FITZROY VIC 3068","319 George Street, Fitzroy VIC 3065","Fergie Street, Fitzroy North VIC 3068","399 Lonsdale Street, MELBOURNE VIC 3000","77 Story Street, Parkville VIC 3052","210 Errol Street, North Melbourne VIC 3051","185 Gold St, Clifton Hill VIC 3068","597 St Kilda Road, Melbourne VIC 3004","1 Tasma Street, Ascot Vale VIC 3032","57 Miles Street, Southbank VIC 3006","87 Wilson Street, Moonee Ponds VIC 3039","74 Roseberry Street, ASCOT VALE VIC 3032","17 Leslie Road, ESSENDON VIC 3040","405 Racecourse Rd, Kensington VIC 3031","Clarendon St, Avondale Heights VIC 3034","1 Doone Street, Essendon VIC 3040","41 Rosehill Road, ESSENDON VIC 3040","400 Pascoe Vale Road, Strathmore VIC 3041","2 Leslie Road, ESSENDON VIC 3040","Lloyd Street, Strathmore VIC 3041","6 Teague Street, NIDDRIE VIC 3042","25-31 Edward Street, ESSENDON VIC 3040","Sapphire Street, Niddrie VIC 3042","Scott Street, Elwood VIC 3184","52 River Street, SOUTH YARRA VIC 3141","100 Montague Street, South Melbourne VIC 3205","415 Graham Street, Port Melbourne VIC 3207","2B Brighton Road, St Kilda VIC 3182","Yarra Boulevard, Richmond VIC 3121","59 Wilson Street, Brighton VIC 3186","7 Wynnstay Road, PRAHRAN EAST VIC 3181","19 Windermere Crescent, Brighton VIC 3186","59 Holyrood Street, HAMPTON VIC 3188","528 Hampton Street, Hampton VIC 3188","66 Landcox Street, Brighton East VIC 3187","31 Moonga Road, TOORAK VIC 3142","3 Hood Crescent, CAULFIELD VIC 3161","Peterson Street, HIGHETT VIC 3190","103-129 Oak Grove Drive, NARRE WARREN SOUTH VIC 3805","19-21 Victoria Road, Narre Warren VIC 3805","333 Centre Road, NARRE WARREN SOUTH VIC 3805","30 Belvedere Road, Seaford VIC 3198","Sassafras Drive, Frankston VIC 3199","Bemersyde Drive, Berwick VIC 3806","Silvertop Street, Frankston North VIC 3200","20 Sherwood Road, Narre Warren South VIC 3805","496 Princes Highway, NARRE WARREN VIC 3805","49 Stanhope Street, MALVERN VIC 3144","58 Reema Boulevard, Endeavour Hills VIC 3802","73 Ridgemont Drive, BERWICK VIC 3806","Rowellyn Avenue, Carrum Downs VIC 3201","Belar Avenue, Frankston VIC 3199","Havana Crescent, Frankston VIC 3199","950 South Gippsland Highway, Cranbourne VIC 3977","25 Broderick Road, CARRUM DOWNS VIC 3201","67-77 Thomas Mitchell Drive, Endeavour Hills VIC 3802","74-84 Frawley Road, Hallam VIC 3803","165 Mc Mahons Road, FRANKSTON VIC 3199","120 Hallam Road, HAMPTON PARK VIC 3976","76 Mossgiel Park Drive, ENDEAVOUR HILLS VIC 3802","Hallifax Street, Seaford VIC 3198","72 Viewgrand Drive, Berwick VIC 3806","68 Bemersyde Drive, Berwick VIC 3806","David Collins Drive, Endeavour Hills VIC 3802","Somerville Road, Hampton Park VIC 3976","86-94 Austin Road, SEAFORD VIC 3198","14-36 Lesdon Avenue, Cranbourne VIC 3977","Kilberry Boulevard, Hampton Park VIC 3976","11 Columbia Drive, Wheelers Hill VIC 3150","23 Police Road, MULGRAVE VIC 3170","8 Park Street, FRANKSTON VIC 3199","15-25 Academy Avenue, Wheelers Hill VIC 3150","79 - 93 Kurrajong Road, Narre Warren VIC 3805","22 Wells Road, Seaford VIC 3198","21 Mackie Road, Bentleigh East VIC 3165","27-35 Pinewood Drive, Mount Waverley VIC 3149","Mcrae Street, Seaford VIC 3198","17-33 Petronella Avenue, Wheelers Hill VIC 3150","20 Warrigal Road, Oakleigh VIC 3166","Riley Street, Oakleigh South VIC 3167","10 Gum Nut Drive, Langwarrin VIC 3910","Grange Street, Oakleigh South VIC 3167","263 McCormicks Road, Carrum Downs VIC 3201","1785 South Gippsland Hwy, CRANBOURNE VIC 3977","113 Warrigal Road, HUGHESDALE VIC 3166","30 Warrandyte Road, LANGWARRIN VIC 3910","724 Glen Huntly Road, Caulfield South VIC 3162","113 Oak Street, BEAUMARIS VIC 3193","Grange Road, Glen Huntly VIC 3163","Brine Street, Hughesdale VIC 3166","172 Neerim Road, GLEN HUNTLY VIC 3163","Glen Orme Avenue, ORMOND VIC 3204","20 Bolwarra Street, CHADSTONE VIC 3148","12 Margaretta Street, East Bentleigh VIC 3165","Doon Avenue, GLEN WAVERLEY VIC 3150","35 Charles Street, MOUNT WAVERLEY VIC 3149","Cnr Nott & Pool Streets, Port Melbourne VIC 3207"],"Preferred Office":["New Office","New Office","New Office","New Office","New Office","New Office","New Office","New Office","New Office","New Office","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Similar Commute","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Old Office","Similar Commute"],"Commute Change (Mins)":[-16,-15,-15,-13,-12,-12,-11,-11,-11,-8,-5,-4,-4,-4,-3,-3,-3,-2,-2,-2,-2,-2,-2,-2,-2,-2,0,0,1,1,2,4,4,4,4,5,6,7,8,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,14,14,15,16,"NA"],"Preferred Transport for New Office":["Car","Public Transport","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car","Car",null],"Time via Public Transport (Mins)":[8,3,13,22,15,18,12,27,25,23,31,39,20,49,50,41,40,75,63,76,45,39,59,62,51,71,42,25,23,30,34,26,46,39,52,52,51,58,38,43,71,130,133,122,109,134,121,102,134,110,46,138,125,110,123,128,130,118,131,122,123,136,126,98,125,122,131,146,98,133,133,80,80,97,74,119,92,64,73,84,73,76,67,133,79,128,223,72,120,50,72,41,49,65,43,60,66,59,58,"NA"],"Public Transport Time Saving (Mins)":[-59,-71,-54,-44,-54,-44,-55,-43,-43,-51,-18,-34,-40,-33,-26,-34,-25,-23,-70,-32,-34,-34,-51,-46,-32,-35,-22,-32,-43,-37,-22,-23,-38,1,-14,-18,-18,-5,11,-13,-17,3,3,-13,-13,3,3,-12,-13,1,18,2,3,-16,-12,2,3,-17,-11,-4,4,25,4,-12,4,4,-11,25,-12,3,25,11,17,-11,10,4,-10,8,17,-10,10,40,10,-27,21,-3,42,28,-18,-20,-15,-37,-8,12,-15,12,-5,39,16,"NA"],"Time via Car (Mins)":[4,3,6,13,8,12,8,12,12,12,14,20,13,22,23,26,20,32,29,30,23,27,23,28,25,29,22,12,17,20,21,15,28,18,30,31,31,26,17,25,33,42,35,42,41,44,40,44,42,37,19,35,42,44,45,43,41,43,36,34,43,39,35,44,43,40,36,36,41,43,38,27,30,45,26,38,43,27,25,42,29,21,28,49,27,41,53,22,48,28,42,24,26,23,29,22,31,27,27,"NA"],"Car Time Saving (Mins)":[-16,-15,-15,-13,-12,-12,-11,-11,-11,-8,-5,-4,-4,-4,-3,-3,-3,-2,-2,-2,-2,-2,-2,-2,-2,-2,0,0,1,1,2,4,4,4,4,5,6,7,8,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,14,14,15,16,"NA"]},"columns":[{"accessor":"Employee","name":"Employee","type":"character","minWidth":150},{"accessor":"Home Address","name":"Home Address","type":"character","minWidth":175},{"accessor":"Preferred Office","name":"Preferred Office","type":"character","minWidth":150,"align":"center"},{"accessor":"Commute Change (Mins)","name":"Commute Change (Mins)","type":"numeric","minWidth":150,"align":"center"},{"accessor":"Preferred Transport for New Office","name":"Preferred Transport for New Office","type":"character","minWidth":150,"align":"center"},{"accessor":"Time via Public Transport (Mins)","name":"Time via Public Transport (Mins)","type":"numeric","minWidth":150,"align":"center"},{"accessor":"Public Transport Time Saving (Mins)","name":"Public Transport Time Saving (Mins)","type":"numeric","minWidth":150,"align":"center"},{"accessor":"Time via Car (Mins)","name":"Time via Car (Mins)","type":"numeric","minWidth":150,"align":"center"},{"accessor":"Car Time Saving (Mins)","name":"Car Time Saving (Mins)","type":"numeric","minWidth":150,"align":"center"}],"resizable":true,"defaultPageSize":5,"showPageSizeOptions":true,"pageSizeOptions":[5,10,25,50,100],"paginationType":"numbers","showPageInfo":true,"minRows":1,"outlined":true,"borderless":true,"striped":true,"theme":{"highlightColor":"#f0f5f9","cellPadding":"8px 12px","style":{"fontFamily":"-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif"}},"dataKey":"f98aaf48c12b3fe64e1c6a2bc7c0c038"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>The above table could readily be exported to Excel and delivered to Leaders, Managers, Transition Teams, HRBP’s, etc., to help inform the delivery of personalised discussions with staff regarding proposed or upcoming changes. In addition, it could also help to inform the identification of voluntary flight risks, based on negative travel experiences associated with the move. Moreover, additional analyses could be performed on this data to help inform communication efforts (e.g., clustering to develop employee personas).</p>
<p><br></p>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>I often try to think of ways to prompt people to reach out to the People Analytics team for advice or assistance. One quick-fire way, based on this experience, is through automation. If colleagues are having to do things manually more than a dozen times (i.e., look up commute times on Google Maps), its likely the People Analytics Team can help. While automating work is not necessarily a core remit of People Analytics Team’s, it can be a highly useful approach for building both credibility and goodwill among business colleagues (i.e., low actual effort, high perceived value), which can in turn lead to bigger opportunities for both parties. In addition, this approach (and related activities) represent useful activities that can be performed in support of new site selection during a due diligence phase (i.e., pre-selecting venues).</p>
<p>In this example we used a series of addresses to calculate travel distance and time between fictitious home and work addresses for different modes of transit. While using Google Maps programmatically is not without some learning required, I hope this example assists in making it more accessible to a broader range of users. Such functions can and should be used in advance of physical location changes to help proactively identify and mitigate distance-related challenges for all parties involved, both employees and consumers.</p>
<p>Happy coding!</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{dmckinnon2021,
  author = {Adam D McKinnon},
  title = {Going the {Distance!}},
  date = {2021-06-06},
  url = {https://www.adam-d-mckinnon.com//posts/2021-06-06-going_the_distance},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-dmckinnon2021" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Adam D McKinnon. 2021. <span>“Going the Distance!”</span> June 6, 2021.
<a href="https://www.adam-d-mckinnon.com//posts/2021-06-06-going_the_distance">https://www.adam-d-mckinnon.com//posts/2021-06-06-going_the_distance</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>